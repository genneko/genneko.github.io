<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>Playing with BSD - genneko</title>
  <meta property="og:title" content="Playing with BSD - genneko" />
  <meta name="twitter:title" content="Playing with BSD - genneko" />
  <meta name="description" content="A non-professional&#39;s random notes on BSD systems">
  <meta property="og:description" content="A non-professional&#39;s random notes on BSD systems">
  <meta name="twitter:description" content="A non-professional&#39;s random notes on BSD systems">
  <meta name="author" content="genneko"/>
  <meta property="og:site_name" content="genneko" />
  <meta property="og:url" content="https://genneko.github.io/playing-with-bsd/" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.48" />
  <link href="https://genneko.github.io/playing-with-bsd/index.xml" rel="alternate" type="application/rss+xml" title="genneko" />
  <link href="https://genneko.github.io/playing-with-bsd/index.xml" rel="feed" type="application/rss+xml" title="genneko" />

  <link rel="stylesheet" href="https://genneko.github.io/css/style.css" media="all" />
  <link rel="stylesheet" href="https://genneko.github.io/css/syntax.css" media="all" />
  <link rel="stylesheet" href="https://genneko.github.io/css/custom.css" media="all" />

  <script src="https://genneko.github.io/js/script.js"></script>
  <script src="https://genneko.github.io/js/custom.js"></script>
  <script defer src="https://genneko.github.io/js/fontawesome.js"></script>
</head>

<body>

<header class="site-header">
  <nav class="site-navi">
    <img class="site-icon" src="https://genneko.github.io/images/genneko-icon.png">
    <h1 class="site-title"><a href="https://genneko.github.io/">genneko</a></h1>
    <ul class="site-navi-items">
      <li class="site-navi-item-playing-with-bsd"><a href="https://genneko.github.io/playing-with-bsd/" title="Playing with BSD">Playing with BSD</a></li>
      <li class="site-navi-item-tags"><a href="https://genneko.github.io/tags/" title="Tags">Tags</a></li>
      <li class="site-navi-item-archives"><a href="https://genneko.github.io/archives/" title="Archives">Archives</a></li>
      <li class="site-navi-item-about"><a href="https://genneko.github.io/about/" title="About">About</a></li>
    </ul>
  </nav>
</header>
<hr class="site-header-bottom">


  <div class="section-heading">
    <div class="breadcrumb">
      Playing with BSD
      <div class="description">
        A non-professional&#39;s random notes on BSD systems
      </div>
    </div>
  </div>
  <div class="main" role="main">
    <section class="list section-list">
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/system/bootonly-install-behind-proxy/" class="article-titles">
          <h2 class="article-title">Using FreeBSD&#39;s Bootonly Installer Behind a Proxy</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2018-12-06</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/installation/">
              <i class="fas fa-tag"></i>
              installation
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          I&rsquo;ve been so busy for the last month that I almost forgot about FreeBSD 12.0 which I had been looking forward to. Now it&rsquo;s just around the corner!
Although it&rsquo;s quite late, I tried to install 12.0-RC3 on a host behind a HTTP proxy and found that using a bootonly installer in this environment was a bit tricky. The following are the steps I took.
 Boot the host with a bootonly installer.
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/system/bootonly-install-behind-proxy/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/networking/learning-stp/" class="article-titles">
          <h2 class="article-title">Learning Spanning Tree Protocol with FreeBSD Bridges</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2018-11-04</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/bridge/">
              <i class="fas fa-tag"></i>
              bridge
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/network/">
              <i class="fas fa-tag"></i>
              network
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/stp/">
              <i class="fas fa-tag"></i>
              stp
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          Spanning Tree Protocol is a standard protocol for network bridges (layer-two switches) to autonomously find a logical loop-free topology and provide redundancy to the network.
Several variants have been developed since its birth, in which the most common standard is Rapid Spanning Tree Protocol (RSTP). Many managed switches implement the protocol and often enable it by default.
Although it&rsquo;s quite common in the networking world where I&rsquo;m living in its perimeter, it&rsquo;s been something vague and unfamiliar to me for a long time.
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/networking/learning-stp/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/system/learning-notes-on-jails/" class="article-titles">
          <h2 class="article-title">Learning Notes on FreeBSD Jails</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2018-10-07</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/administration/">
              <i class="fas fa-tag"></i>
              administration
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/jail/">
              <i class="fas fa-tag"></i>
              jail
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/virtualization/">
              <i class="fas fa-tag"></i>
              virtualization
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          I have heard about jails many times since my early days of FreeBSD life but it was only the last year I began to use it in production.
This article is a sort of personal notebook where I summarize what I learned about jails. It would be frequently updated as I learn more.
Assumptions  The host is running FreeBSD 11.2/amd64 on ZFS. Each jail has a separate root dataset under /vm on the host.
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/system/learning-notes-on-jails/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/storage/encrypted-temporary-storage/" class="article-titles">
          <h2 class="article-title">Encrypted Temporary Storage with GELI</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2018-09-07</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/geli/">
              <i class="fas fa-tag"></i>
              geli
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/geom/">
              <i class="fas fa-tag"></i>
              geom
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/storage/">
              <i class="fas fa-tag"></i>
              storage
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/zfs/">
              <i class="fas fa-tag"></i>
              zfs
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          Recently, I wanted an encrypted working directory on a running FreeBSD system. The system was running on a plain (unencrypted) ZFS pool and there&rsquo;s no plan to add disks to it. I needed the working directory only temporarily.
I came up with the following options.
 Use GELI on a ZFS volume (zvol). Use GELI on a memory disk (md). Use PEFS on a directory.  I excluded PEFS because I had very little experience.
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/storage/encrypted-temporary-storage/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/networking/freebsd-tunnelv6-he/" class="article-titles">
          <h2 class="article-title">Connecting to the IPv6 Internet via tunnel (HE TunnelBroker)</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2018-08-29</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/ipv6/">
              <i class="fas fa-tag"></i>
              ipv6
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/network/">
              <i class="fas fa-tag"></i>
              network
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          I had been playing with IPv6 on various systems in early 2000s. They were mostly NetBSD (1.x) and FreeBSD (4.x) plus Windows XP. My home network had been connected to the IPv6 Internet with a router running NetBSD/hpcmips which was installed on a Windows CE handheld PC.
After a decade and a half, I decided to reconnect my home network to the IPv6 Internet.
Unfortunately, native IPv6 service is still unavailable for me.
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/networking/freebsd-tunnelv6-he/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/storage/gmirror-to-zfs/" class="article-titles">
          <h2 class="article-title">Migrating a live system from GEOM mirror to ZFS mirror</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2018-04-17</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/geom/">
              <i class="fas fa-tag"></i>
              geom
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/storage/">
              <i class="fas fa-tag"></i>
              storage
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/zfs/">
              <i class="fas fa-tag"></i>
              zfs
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          I had been wanting to migrate a FreeBSD system on a GEOM mirror (gmirror) to a ZFS mirror.
After several rehearsals on a VM, I have finally achieved that goal with the following steps.
 Load ZFS-releated kernel modules and set a tunable to use 4K sector drives.
sudo kldload zfs sudo sysctl vfs.zfs.min_auto_ashift=12  Remove one (da0) of the two disks (da0, da1) which make up the gmirror (gm0).
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/storage/gmirror-to-zfs/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/networking/freebsd-vti-ipsec/" class="article-titles">
          <h2 class="article-title">Route-based VPN with FreeBSD-11.1&#39;s IPsec VTI</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2017-06-22</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/ipsec/">
              <i class="fas fa-tag"></i>
              ipsec
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/network/">
              <i class="fas fa-tag"></i>
              network
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/vpn/">
              <i class="fas fa-tag"></i>
              vpn
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          I have managed to setup route-based IPsec VPN with FreeBSD-11.1 RC3, which had introduced ipsec virtual tunnel interface if_ipsec(4). Here is a record of my experiment just for your information.
Prerequisite  FreeBSD-11.1-RC3/amd64 Generic kernel No special packages/ports (just added sudo and a few other must-have utilities)  Network configuration NOTE: The following text shows bsd1 configurations only.
 10.0.0.1 10.0.0.2 192.168.10.0/24 --- [bsd1] ----- /// ----- [bsd2] --- 192.
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/networking/freebsd-vti-ipsec/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
    </section>
    

  </div>



<div class="site-footer">
  <div class="copyright">&copy; Copyright 2018 genneko</div>
  <ul class="site-footer-items">
    <li class="site-footer-item-rsslink">
      <a href="https://genneko.github.io/playing-with-bsd/index.xml" type="application/rss+xml" target="_blank" title="RSS">
        <i class="fas fa-rss"></i>
      </a>
    </li>
    <li class="site-footer-item-about"><a href="https://genneko.github.io/about/" title="About">About</a></li>
  </ul>
  <div class="powerdby">
    Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/taikii/whiteplain">Whiteplain</a>
  </div>
</div>


</body>
</html>
