<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>Playing with BSD - genneko</title>
  <meta property="og:title" content="Playing with BSD - genneko" />
  <meta name="twitter:title" content="Playing with BSD - genneko" />
  <meta name="description" content="Random notes on *BSD (mostly FreeBSD) systems">
  <meta property="og:description" content="Random notes on *BSD (mostly FreeBSD) systems">
  <meta name="twitter:description" content="Random notes on *BSD (mostly FreeBSD) systems">
  <meta name="author" content="genneko"/>
  <meta property="og:site_name" content="genneko" />
  <meta property="og:url" content="https://genneko.github.io/playing-with-bsd/" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.48" />
  <link href="https://genneko.github.io/playing-with-bsd/index.xml" rel="alternate" type="application/rss+xml" title="genneko" />
  <link href="https://genneko.github.io/playing-with-bsd/index.xml" rel="feed" type="application/rss+xml" title="genneko" />
  <link rel="stylesheet" href="https://genneko.github.io/css/style.css" media="all" />
  <link rel="stylesheet" href="https://genneko.github.io/css/syntax.css" media="all" />
  <link rel="stylesheet" href="https://genneko.github.io/css/custom.css" media="all" />
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
</head>

<body>

<header class="site-header">
  <nav class="site-navi">
    <img class="site-icon" src="https://genneko.github.io/images/genneko-icon.png">
    <h1 class="site-title"><a href="https://genneko.github.io/">genneko</a></h1>
    <ul class="site-navi-items">
      <li class="site-navi-item-playing-with-bsd"><a href="https://genneko.github.io/playing-with-bsd/" title="Playing with BSD">Playing with BSD</a></li>
      <li class="site-navi-item-tags"><a href="https://genneko.github.io/tags/" title="Tags">Tags</a></li>
      <li class="site-navi-item-archives"><a href="https://genneko.github.io/archives/" title="Archives">Archives</a></li>
      <li class="site-navi-item-about"><a href="https://genneko.github.io/about/" title="About">About</a></li>
    </ul>
  </nav>
</header>
<hr class="site-header-bottom">


  <div class="section-heading">
    <div class="breadcrumb">
      Playing with BSD
      <div class="description">
        Random notes on *BSD (mostly FreeBSD) systems
      </div>
    </div>
  </div>
  <div class="main" role="main">
    <section class="list section-list">
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/storage/encrypted-temporary-storage/" class="article-titles">
          <h2 class="article-title">Encrypted Temporary Storage with GELI</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2018-09-07</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/geli/">
              <i class="fas fa-tag"></i>
              geli
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/geom/">
              <i class="fas fa-tag"></i>
              geom
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/storage/">
              <i class="fas fa-tag"></i>
              storage
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/zfs/">
              <i class="fas fa-tag"></i>
              zfs
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          Recently, I wanted an encrypted working directory on a running FreeBSD system. The system was running on a plain (unencrypted) ZFS pool and there&rsquo;s no plan to add disks to it. I needed the working directory only temporarily.
I came up with the following options.
 Use GELI on a ZFS volume (zvol). Use GELI on a memory disk (md). Use PEFS on a directory.  I excluded PEFS because I had very little experience.
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/storage/encrypted-temporary-storage/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/networking/freebsd-tunnelv6-he/" class="article-titles">
          <h2 class="article-title">Connecting to the IPv6 Internet via tunnel (HE TunnelBroker)</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2018-08-29</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/ipv6/">
              <i class="fas fa-tag"></i>
              ipv6
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/network/">
              <i class="fas fa-tag"></i>
              network
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          I had been playing with IPv6 on various systems in early 2000s. They were mostly NetBSD (1.x) and FreeBSD (4.x) plus Windows XP. My home network had been connected to the IPv6 Internet with a router running NetBSD/hpcmips which was installed on a Windows CE handheld PC.
After a decade and a half, I decided to reconnect my home network to the IPv6 Internet.
Unfortunately, native IPv6 service is still unavailable for me.
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/networking/freebsd-tunnelv6-he/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/storage/gmirror-to-zfs/" class="article-titles">
          <h2 class="article-title">Migrating a live system from GEOM mirror to ZFS mirror</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2018-04-17</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/geom/">
              <i class="fas fa-tag"></i>
              geom
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/storage/">
              <i class="fas fa-tag"></i>
              storage
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/zfs/">
              <i class="fas fa-tag"></i>
              zfs
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          I had been wanting to migrate a FreeBSD system on a GEOM mirror (gmirror) to a ZFS mirror.
After several rehearsals on a VM, I have finally achieved that goal with the following steps.
 Load ZFS-releated kernel modules and set a tunable to use 4K sector drives.
sudo kldload zfs sudo sysctl vfs.zfs.min_auto_ashift=12  Remove one (da0) of the two disks (da0, da1) which make up the gmirror (gm0).
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/storage/gmirror-to-zfs/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="https://genneko.github.io/playing-with-bsd/networking/freebsd-vti-ipsec/" class="article-titles">
          <h2 class="article-title">Route-based VPN with FreeBSD-11.1&#39;s IPsec VTI</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>2017-06-22</time></li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/freebsd/">
              <i class="fas fa-tag"></i>
              freebsd
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/ipsec/">
              <i class="fas fa-tag"></i>
              ipsec
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/network/">
              <i class="fas fa-tag"></i>
              network
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="https://genneko.github.io/tags/vpn/">
              <i class="fas fa-tag"></i>
              vpn
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          I have managed to setup route-based IPsec VPN with FreeBSD-11.1 RC3, which had introduced ipsec virtual tunnel interface. Here is a record of my experiment just for your information.
Prerequisite  FreeBSD-11.1-RC3/amd64 Generic kernel No special packages/ports (just added sudo and a few other must-have utilities)  Network configuration NOTE: The following text shows bsd1 configurations only.
 10.0.0.1 10.0.0.2 192.168.10.0/24 --- [bsd1] ----- /// ----- [bsd2] --- 192.168.20.0/24 172.
        </div>
        <div class="article-readmore"><a href="https://genneko.github.io/playing-with-bsd/networking/freebsd-vti-ipsec/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
    </section>
    

  </div>



<div class="site-footer">
  <div class="copyright">&copy; Copyright 2018 genneko</div>
  <ul class="site-footer-items">
    <li class="site-footer-item-rsslink">
      <a href="https://genneko.github.io/playing-with-bsd/index.xml" type="application/rss+xml" target="_blank" title="RSS">
        <i class="fas fa-rss"></i>
      </a>
    </li>
    <li class="site-footer-item-about"><a href="https://genneko.github.io/about/" title="About">About</a></li>
  </ul>
  <div class="powerdby">
    Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/taikii/whiteplain">Whiteplain</a>
  </div>
</div>
<script src="https://genneko.github.io/js/script.js"></script>
<script src="https://genneko.github.io/js/custom.js"></script>


</body>
</html>
